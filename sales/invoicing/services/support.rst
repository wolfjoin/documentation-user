==================================================
如何给支持合同开票(预付小时数)？
==================================================

有不同种类的销售服务 :预付小时数／天数(例如支持合同), 
基于记工单的开票(例如咨询顾问时间)以及固定价格合同(例如一个项目)。

在本章节, 我们来看一下如何销售和追踪预支付的支持合同

例如, 你可以销售一个价格为 ``$25,000`` 的 ``50小时`` 支持包。
价格是固定的并且已经预先付款。但是你想跟踪你给客户的支持服务

配置
=============

安装销售和工时表应用
--------------------------------------------

为了能销售服务, 你需要从 **APP** 图标安装 **销售** 模块, 并且安装从 **工时表** 应用

.. image:: media/support01.png
    :align: center

.. image:: media/support02.png
    :align: center

创建产品
---------------

默认状况下, 产品是根据单位数量销售的, 为了能按 ``每小时`` 销售服务, 必须使用产品的多种计量单位, 
在销售模块下, 进入菜单选项 :menuselection:`配置 --> 设置` , 
在本页面激活 **多种计量单位** 选项。

.. image:: media/support03.png
    :align: center

为了能够销售支持合同, 必须创建一个所有支持合同都能销售的产品。从 **销售** 应用下, 
进入菜单选项 :menuselection:`销售 --> 产品`, 用以下步骤创建新的产品 :

-   **名称**: 技术支持

-   **产品类型**: 服务

-   **度量单位**: Hours

-   **开票政策**: 订单数量，因为服务已预付，我们将根据已订购的订单发票，而不是基于交货数量。

-   **跟踪服务**: 项目的工时表。将为包含此服务的每个订单自动创建分析帐户，以便跟踪相关帐户中的小时数。

.. image:: media/support04.png
    :align: center

.. tip:: 
    跟踪销售订单或销售产品相关服务有不同的方法。通过上述配置，
    您只能按订单销售一个支持合同。如果您的客户在时间表上订购
    多个服务合约，您将不得不将报价分成几个订单。

请注意，您可以在不同的计量单位不是几小时，例如卖：天，40小时的包装等。
要做到这一点，只是在衡量创建一个新的单位计量单位类别相比，并设置了转化率
**时间** （例如：``1 day = 8 hours``）。

管理支持合同
=========================

报价单和销售订单
--------------------------

创建产品后，您可以使用相关产品创建报价单或销售订单。
一旦报价确认并转换成销售订单，您的用户将能够使用工时表
应用程序记录与此支持合同相关的服务。

.. image:: media/support05.png
    :align: center

工时表
----------

要跟踪一个特定合同上的服务, 需要使用记工单应用 。一个和销售订单关联的
分析账户自动创建, (屏幕上的" SO009 - Agrolait "), 然后只要服务被销售掉就可以对之进行跟踪。

.. image:: media/support06.png
    :align: center

Control delivered support on the sale order
在销售订单上控制已完成服务
-------------------------------------------

从销售应用程序中，使用菜单 :menuselection:`销售 --> 销售订单` 来控制每个订单的进度。
在与支持合同相关的销售订单行中，您将看到根据时间表中的小时数自动更新的交货数量。

.. image:: media/support07.png
    :align: center

向上销售和更新（Upselling and renewal）
--------------------------------------

如果您在支持合同上执行的小时数大于或等于客户购买的小时数，
则销售订单 **发票状态** 将自动设置为 **超售（Upselling）** 。
这意味着您有机会向客户出售额外的合同，因为他使用了所有的服务配额。

定期（理想情况下每两周一次），您应该检查处于加售状态的销售订单。要执行此操作，
请转到 :menuselection:`销售 --> 销售订单` ,并使用 **超售Upselling** 过滤器来获取所有订单。

.. tip::
    如果你使用Odoo CRM, 最好的方式就是为每个在超售销售开票状态的销售订单创建一个商机, 这样你就可以容易追踪超售销售


如果您出售额外的支持合同，您可以在现有的销售订单上修改为新的数字。
（因此，您继续按同一订单进行时间表）或创建新订单（因此，人们将在新合同上计时） 。
要解除销售 **超售** ，你可以将销售订单的完成，它会从你的超售销售列表中消失。

特殊配置
=====================

创建产品表单时，您可以设置不同的方法来跟踪服务：

-   **创建任务和跟踪时间**: 在此模式下，为每个销售订单行创建一个任务。然后，当您执行时间表时，
    您不要在销售订单/合同上记录小时数，而是记录任务（代表合同）的时间。这个解决方案的优点是
    允许在相同的销售订单中销售多个服务合同。

-   **手动**: 如果您不在Odoo中记录时间表，您可以使用此模式。您在特定合同上工作的小时数可以
    直接在交货数量字段中在销售订单行手动记录。

-   **项目的工时表** ：该属性下一个订单只能包含一个产品，
    工时表在同一销售订单中你只能在工时表用一个产品。
    如果多个服务的，只能创建多个销售单来解决。

.. seealso::
    * :doc:`../../../inventory/settings/products/uom`
